<!-- Loop over the Clients in $scope.clients -->
<div>
	<button type="button" class="btn btn-primary btn-md" ng-click="returnClient('../../templates/accountPanel.html')">Back</button>
	<hr/>
</div>
<div class="panel panel-primary col-md-3" ng-repeat="client in clients track by $id(client)">
    <div class="panel-heading col-md-12">
    	<div class="col-lg-9">
        	<h3 class="panel-title">{{ client.name }}</h3>
        </div>
        <div class="col-lg-3">
        	<button class="btn btn-default btn-sm" data-toggle="modal" data-target="#myModal" data-client="{{ client }}" ng-click="displayCodes(client, parentId)">Details</button>
        </div>
    </div>
    <div class="panel-body col-md-12">
        <form class="form-inline">
            <div class="form-group">
                <input type="text" class="form-control input-sm text-center" placeholder="New Client Name" ng-model="formData.text">
                <button type="submit" class="btn btn-default btn-sm" ng-click="updateClient(client._id)">Edit</button>
            </div>
        </form>
        <button type="submit" class="btn btn-primary btn-sm" ng-click="deleteClient(client._id)">Delete</button>
        <div class="col-md-4 col-md-offset-8">
        	<span class="label label-default" data-toggle="tooltip" data-placement="auto top" title="Bazaarvoice Platform">{{ client.platform }}</span>
        	<span class="label label-success" ng-if="client.displayCodes.length >= 1" data-toggle="tooltip" data-placement="auto top" title="Display Codes">{{ client.displayCodes.length }}</span>
        </div>
    </div>
</div>
<!-- Form to create Clients -->
<div id="client-form" class="row">
    <div class="col-sm-8 col-sm-offset-2 text-center">
        <form>
            <div class="form-group">

                <!-- Bind this value to formData.text in IN ANGULAR -->
                <input type="text" class="form-control input-lg text-center" placeholder="ClientName" ng-model="formData.text">
            </div>

            <!-- createClient() will create new Clients -->
            <button type="submit" class="btn btn-default btn-lg" ng-click="createClient()">Add</button>
        </form>
    </div>
</div>

<!-- Details Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel"></h4>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-9">
						<div><b>Cluster</b></div>
					</div>
					<div class="col-md-3">
						<div id="clientCluster"></div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-9">
						<div><b>Platform</b></div>
					</div>
					<div class="col-md-3">
						<div id="clientPlatform"></div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-9">
						<div><b>UI Version</b></div>
					</div>
					<div class="col-md-3">
						<div id="clientUIVersion"></div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">

	// Pushing data from the 'client' onto the pop up modal
	$('#myModal').on('show.bs.modal', function(e) {
		var client = $(e.relatedTarget).data('client');
		$(e.currentTarget).find('#myModalLabel').text(client.name);
		$(e.currentTarget).find('#clientCluster').text(client.cluster);
		$(e.currentTarget).find('#clientPlatform').text(client.platform);
		$(e.currentTarget).find('#clientUIVersion').text(client.ui_version);
	})
</script>